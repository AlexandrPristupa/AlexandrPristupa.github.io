(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{52:function(e,a,t){e.exports=t(67)},66:function(e,a,t){},67:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),o=t.n(c),i=t(116),s=t(25),u=t.n(s),l=t(32),m=t(33),p=t(40),f=t(26),h=t.n(f),d=(t(58),t(60),h.a.initializeApp({apiKey:"AIzaSyDWRSZp4jG75VKMbBmJFKsUG-9QS5DnZRo",authDomain:"react-chat-3c938.firebaseapp.com",databaseURL:"https://react-chat-3c938.firebaseio.com",projectId:"react-chat-3c938",storageBucket:"react-chat-3c938.appspot.com",messagingSenderId:"535946449253",appId:"1:535946449253:web:54a78d4703dddf2545518c"}).auth()),v={googleProvider:new h.a.auth.GoogleAuthProvider},g=t(101),E=t(105),b=function(e){var a=e.children;return r.a.createElement(g.a,{position:"static"},r.a.createElement(E.a,null,a))},w=t(106),j=t(107),k=t(108),y=t(110),S=t(109),O=t(30),x=function(e){var a=e.messages,t=Object(n.useRef)(null);return Object(n.useEffect)((function(){t.current.scrollIntoView({behavior:"smooth"})}),[a]),r.a.createElement(w.a,{className:"Message-list"},a&&a.length?a.map((function(e){var a=e.id,t=e.name,n=e.picture,c=e.text;return r.a.createElement(j.a,{button:!0,key:a},r.a.createElement(k.a,null,r.a.createElement(S.a,{alt:"Profile Picture",src:n})),r.a.createElement(y.a,{primary:t,secondary:c}))})):r.a.createElement(O.a,{variant:"h5",gutterBottom:!0},"No messages"),r.a.createElement("div",{ref:t}))},I=t(111),C=t(114),A=t(112),M=t(113),B=function(e){var a=e.onSendMessage,t=e.onChange,n=e.value;return r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:a,className:"Message-form"},r.a.createElement(I.a,{container:!0},r.a.createElement(I.a,{container:!0,xs:10},r.a.createElement(C.a,{fullWidth:!0,label:"Message",margin:"normal",value:n,onChange:t})),r.a.createElement(I.a,{container:!0,xs:2},r.a.createElement(A.a,{variant:"contained",color:"primary",endIcon:r.a.createElement(M.a,null,"send"),onClick:a},"Send"))))},D=(t(66),Object(p.a)({providers:v,firebaseAppAuth:d})((function(e){var a=e.signInWithGoogle,t=e.signOut,c=e.user,o=Object(n.useState)(""),i=Object(m.a)(o,2),s=i[0],p=i[1],f=Object(n.useState)([]),d=Object(m.a)(f,2),v=d[0],g=d[1],E=function(){var e=Object(l.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){h.a.database().ref("messages/").limitToLast(500).on("value",(function(a){var t=[];a.forEach((function(e){var a=e.val();t.push({id:e.key,text:a.text,name:a.name,picture:a.picture})})),e(t)}))}));case 2:a=e.sent,g(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){E()}),[]);var w=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=!!c;return r.a.createElement("div",{className:"App"},r.a.createElement(b,null,!j&&r.a.createElement(A.a,{color:"inherit",onClick:function(){return a()}},"Sign in"),j&&r.a.createElement(A.a,{color:"inherit",onClick:w},"Sign out")),j&&r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{messages:v}),r.a.createElement(B,{onSendMessage:function(e){if(e.preventDefault(),s){var a=c.providerData[0],t=a.displayName,n=a.photoURL;!function(e){h.a.database().ref("messages/").push(e)}({text:s,name:t,picture:n}),E(),p("")}},onChange:function(e){return p(e.target.value)},value:s})))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null),r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.a9132877.chunk.js.map